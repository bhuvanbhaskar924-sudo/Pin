<!DOCTYPE html>
<html>
<head>
<title>BHASKAR RUN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  overflow:hidden;
  background:black;
  font-family:Arial;
}
canvas{
  display:block;
}
#menu,#gameOver{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.85);
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:10;
}
button{
  padding:12px 25px;
  font-size:20px;
}
#ui{
  position:fixed;
  top:10px;
  left:10px;
  color:white;
  font-size:20px;
  z-index:5;
}
</style>
</head>
<body>

<div id="menu">
  <h1>üî• BHASKAR RUN üî•</h1>
  <p>Swipe Up = Jump | Down = Slide | Left/Right = Move</p>
  <button onclick="startGame()">Start Game</button>
</div>

<div id="gameOver" style="display:none;">
  <h1>GAME OVER üò°</h1>
  <p id="finalScore"></p>
  <button onclick="restart()">Restart</button>
</div>

<div id="ui">Score: 0 | Coins: 0 | Lives: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
<canvas id="game"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

let lanes=[canvas.width*0.25,canvas.width*0.5,canvas.width*0.75];
let speed=10,score=0,coinsCount=0,lives=3,playing=false,gameOver=false;
let shake=0,roadOffset=0;

let player={
 lane:1,x:0,y:canvas.height-220,w:90,h:120,
 dy:0,gravity:1.5,jump:-25,onGround:true,slide:false
};

let obstacles=[],coins=[];

// Swipe
let sx=0,sy=0;
document.addEventListener("touchstart",e=>{
 sx=e.touches[0].clientX; sy=e.touches[0].clientY;
});
document.addEventListener("touchend",e=>{
 let ex=e.changedTouches[0].clientX;
 let ey=e.changedTouches[0].clientY;
 let dx=ex-sx,dy=ey-sy;
 if(Math.abs(dx)>Math.abs(dy)){
   if(dx>50) moveRight();
   if(dx<-50) moveLeft();
 }else{
   if(dy<-50) jump();
   if(dy>50) slide();
 }
});

function startGame(){
 document.getElementById("menu").style.display="none";
 playing=true;
 update();
}

function moveLeft(){ if(player.lane>0) player.lane--; }
function moveRight(){ if(player.lane<2) player.lane++; }

function jump(){
 if(player.onGround){
  player.dy=player.jump;
  player.onGround=false;
 }
}

function slide(){
 if(!player.slide){
  player.slide=true;
  player.h=60;
  setTimeout(()=>{
    player.h=120;
    player.slide=false;
  },600);
 }
}

function createObstacle(){
 let lane=Math.floor(Math.random()*3);
 obstacles.push({
  x:lanes[lane]-60,y:-200,w:120,h:160
 });
}

function createCoin(){
 let lane=Math.floor(Math.random()*3);
 coins.push({
  x:lanes[lane],y:-50,r:15
 });
}

function drawRoad(){
 ctx.fillStyle="#222";
 ctx.fillRect(0,0,canvas.width,canvas.height);

 roadOffset+=speed;
 if(roadOffset>40) roadOffset=0;

 ctx.strokeStyle="#666";
 ctx.lineWidth=4;
 ctx.setLineDash([20,20]);
 ctx.lineDashOffset=-roadOffset;
 ctx.beginPath();
 ctx.moveTo(canvas.width/3,0);
 ctx.lineTo(canvas.width/3,canvas.height);
 ctx.moveTo(2*canvas.width/3,0);
 ctx.lineTo(2*canvas.width/3,canvas.height);
 ctx.stroke();
 ctx.setLineDash([]);
}

function update(){
 if(!playing||gameOver) return;

 if(shake>0){
  ctx.translate(Math.random()*shake-shake/2,Math.random()*shake-shake/2);
  shake--;
 }

 ctx.clearRect(0,0,canvas.width,canvas.height);
 drawRoad();

 // Player
 ctx.fillStyle="#ffcc00";
 player.x=lanes[player.lane]-player.w/2;
 ctx.beginPath();
 ctx.roundRect(player.x,player.y,player.w,player.h,20);
 ctx.fill();

 player.dy+=player.gravity;
 player.y+=player.dy;
 if(player.y+player.h>=canvas.height-40){
  player.y=canvas.height-40-player.h;
  player.dy=0; player.onGround=true;
 }

 // Obstacles (Train style)
 obstacles.forEach((o,i)=>{
  o.y+=speed;
  ctx.fillStyle="#c0392b";
  ctx.fillRect(o.x,o.y,o.w,o.h);
  ctx.fillStyle="#555";
  ctx.fillRect(o.x+10,o.y+20,o.w-20,30);

  if(
   player.x<o.x+o.w && player.x+player.w>o.x &&
   player.y<o.y+o.h && player.y+player.h>o.y
  ){
   lives--;
   shake=20;
   obstacles.splice(i,1);
   if(lives<=0) endGame();
  }
  if(o.y>canvas.height) obstacles.splice(i,1);
 });

 // Coins
 coins.forEach((c,i)=>{
  c.y+=speed;
  let grad=ctx.createRadialGradient(c.x,c.y,2,c.x,c.y,20);
  grad.addColorStop(0,"#fff6a0");
  grad.addColorStop(1,"#ffb700");
  ctx.fillStyle=grad;
  ctx.beginPath();
  ctx.arc(c.x,c.y,c.r,0,Math.PI*2);
  ctx.fill();

  let dx=(player.x+player.w/2)-c.x;
  let dy=(player.y+player.h/2)-c.y;
  if(Math.sqrt(dx*dx+dy*dy)<40){
   coinsCount++;
   coins.splice(i,1);
  }
  if(c.y>canvas.height) coins.splice(i,1);
 });

 if(Math.random()<0.02) createObstacle();
 if(Math.random()<0.015) createCoin();

 score++;
 speed+=0.002;

 document.getElementById("ui").innerText=
 "Score: "+score+" | Coins: "+coinsCount+" | Lives: "+"‚ù§Ô∏è".repeat(lives);

 ctx.setTransform(1,0,0,1,0,0);
 requestAnimationFrame(update);
}

function endGame(){
 gameOver=true;
 document.getElementById("gameOver").style.display="flex";
 document.getElementById("finalScore").innerText=
 "Score: "+score+" | Coins: "+coinsCount;
}

function restart(){
 score=0; coinsCount=0; lives=3; speed=10;
 obstacles=[]; coins=[]; gameOver=false;
 document.getElementById("gameOver").style.display="none";
 update();
}
</script>
</body>
</html>
